<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"> 
	<body> 
		<f:view contracts="#{view.locale.language}">
			<ui:composition template="/template.xhtml">
				<ui:define name="content">
					<h1>#{campaignProducer.addMode ? msg['editCampaign.add_new_campaign'] : msg['editCampaign.edit_campaign']}</h1>
					<h:form>
						<p:messages closable="true"/>
						<p:tabView id="tabView">
							<p:tab title="#{msg['editCampaign.general']}">
								<h:panelGrid columns="3">
									<h:outputLabel value="#{msg['editCampaign.name']}:">
									</h:outputLabel>
									<p:inputText value="#{campaignProducer.selectedCampaign.name}" id="a_name" validatorMessage="#{msg['editCampaign.campaign_name_validation']}">
										<f:passThroughAttribute name="placeholder" value="#{msg['editCampaign.name_of_the_campaign']}"/>
										<f:validateRequired/>
										<f:validateLength minimum="4" maximum="30"/>
									</p:inputText>
									<p:message for="a_name"/>
									<h:outputLabel value="#{msg['editCampaign.target_amount']}:">
									</h:outputLabel>
									<h:panelGroup>
										<p:inputText value="#{campaignProducer.selectedCampaign.targetAmount}" id="a_target_amount" 
											validatorMessage="#{msg['editCampaign.target_amount_validation']}">
											<f:convertNumber maxFractionDigits="2" minFractionDigits="2"/>
											<f:validateRequired/>
											<f:validateDoubleRange minimum="10.0"/>
										</p:inputText> EUR
									</h:panelGroup>
									<p:message for="a_target_amount"/>
									<h:outputLabel value="#{msg['editCampaign.donation_amount']}:">
									</h:outputLabel>
									<h:panelGroup>
										<p:inputText value="#{campaignProducer.selectedCampaign.donationMinimum}" id="a_donationMinimum"
											validatorMessage="#{msg['editCampaign.donation_amount_validation']}">
											<f:convertNumber maxFractionDigits="2" minFractionDigits="2"/>
											<f:validateRequired/>
											<f:validateDoubleRange minimum="1.0"/>
										</p:inputText> EUR
									</h:panelGroup>
									<p:message for="a_donationMinimum"/>
								</h:panelGrid>
							</p:tab>
							<p:tab title="#{msg['editCampaign.bank_account']}">
								<h:panelGrid columns="3">
									<h:outputLabel value="#{msg['editCampaign.name']}:">
									</h:outputLabel>
									<p:inputText value="#{campaignProducer.selectedCampaign.account.name}" id="b_name">
										<f:passThroughAttribute name="placeholder" value="#{msg['editCampaign.name_of_account_owner']}"/>
										<f:validateRequired/>
									</p:inputText>
									<p:message for="b_name"/>
									<h:outputLabel value="#{msg['editCampaign.iban']}:">
									</h:outputLabel>
									<p:inputText value="#{campaignProducer.selectedCampaign.account.iban}" id="b_iban">
										<f:validateRequired/>
									</p:inputText>
									<p:message for="b_iban"/>
									<h:outputLabel value="#{msg['editCampaign.name_of_bank']}:">
									</h:outputLabel>
									<p:inputText value="#{campaignProducer.selectedCampaign.account.nameOfBank}" id="b_name_bank">
										<f:validateRequired/>
									</p:inputText>
									<p:message for="b_name_bank"/>
								</h:panelGrid>
							</p:tab>
						</p:tabView>
						<p:commandButton action="#{editCampaignController.doSave}" value="#{msg['editCampaign.save']}" ajax="false"/>
						<p:commandButton action="#{editCampaignController.doCancel}" value="#{msg['editCampaign.cancel']}" immediate="true" ajax="false"/>
					</h:form>
				</ui:define>
			</ui:composition>
		</f:view>
	</body> 
</html>
